# 11장. 뉴스피드 시스템 설계

뉴스피드 시스템을 설계에서 대규모 트래픽을 신경쓸 때 중요한 점은 피드 업데이트를 어느 시점에 하느냐이다.  

## 쓰기 시점에 피드 업데이트
포스트를 작성한 즉시 포스트 주인을 팔로우 하는 사람들의 피드를 전부 갱신한다.  
일반적인 경우 이 방법으로 설계를 할 것 같다.  

이 방식의 경우 뉴스피드를 읽는 데 드는 시간은 짧지만, 팔로우를 많이 가진 사람이 글을 작성할 경우 수 많은 사람들의 피드를 전부 갱신해야 하므로 자원이 낭비가 된다.  

## 읽기 시점에 피드 업데이트
피드의 주인이 피드를 조회하는 순간에 피드 업데이트를 진행한다.  
이 방식을 채택하면 서비스를 거의 사용하지 않는 사람들의 피드는 업데이트를 하지 않아도 되기 떄문에 상대적으로 자원 낭비가 되지 않는다.  
하지만 쓰기 시점에 피드를 업데이트 하는 경우보다 시간이 더 소요될 수 있다.  

## 어떤 방법이 좋을까?
둘 중에 하나의 방식을 선택하는 것보다는 두 개의 방식을 적절하게 사용하는 것이 좋다.  
유명인들의 경우 팔로우 수가 많기 때문에 읽기 시점에 피드를 업데이트 하는 방식을 채택하고,  일반인의 경우 쓰기 시점에 피드 업데이트 방식을 채택하면 효율적인 서비스 운영을 할 수 있을 것 같다.  
더 나아가 조회가 잦은 만큼 사용자 정보와 포스팅 정보를 캐시해서 관리하면 좋을 것 같다.